!function(e){function t(e,t,n,r){if(!e.tag.isInline&&n.length>0){n.push("\n");for(var a=0;r>a;a++)n.push("	")}}function n(r,a){var i=[],s=0==r.attributes.length,u=0,m=null,g=r.tag.render&&(0==a.allowedTags.length||e.inArray(r.tag.name,a.allowedTags)>-1)&&(0==a.removeTags.length||-1==e.inArray(r.tag.name,a.removeTags));if(!r.isRoot&&g&&(i.push("<"),i.push(r.tag.name),e.each(r.attributes,function(){if(-1==e.inArray(this.name,a.removeAttrs)){var t=new RegExp(/^(['"]?)(.*?)['"]?$/).exec(this.value),n=t[2],s=t[1]||"'";"class"==this.name&&(n=e.grep(n.split(" "),function(t){return e.grep(a.allowedClasses,function(n){return n[0]==t&&(1==n.length||e.inArray(r.tag.name,n[1])>-1)}).length>0}).join(" "),s="'"),null!=n&&(n.length>0||e.inArray(this.name,r.tag.requiredAttributes)>-1)&&(i.push(" "),i.push(this.name),i.push("="),i.push(s),i.push(n),i.push(s))}})),r.tag.isSelfClosing)g&&i.push(" />"),s=!1;else if(r.tag.isNonClosing)s=!1;else{if(!r.isRoot&&g&&i.push(">"),u=a.formatIndent++,r.tag.toProtect)m=e.htmlClean.trim(r.children.join("")).replace(/<br>/gi,"\n"),i.push(m),s=0==m.length,a.formatIndent--;else{m=[];for(var p=0;p<r.children.length;p++){var f=r.children[p],b=e.htmlClean.trim(d(o(f)?f:f.childrenToString()));c(f)&&p>0&&b.length>0&&(l(f)||h(r.children[p-1]))&&m.push(" "),o(f)?b.length>0&&m.push(b):(p!=r.children.length-1||"br"!=f.tag.name)&&(a.format&&t(f,a,m,u),m=m.concat(n(f,a)))}a.formatIndent--,m.length>0&&(a.format&&"\n"!=m[0]&&t(r,a,i,u),i=i.concat(m),s=!1)}!r.isRoot&&g&&(a.format&&t(r,a,i,u-1),i.push("</"),i.push(r.tag.name),i.push(">"))}return!r.tag.allowEmpty&&s?[]:i}function r(t,n,a){return a=a||1,e.inArray(t[t.length-a].tag.name,n)>-1?!0:t.length-(a+1)>0&&r(t,n,a+1)?(t.pop(),!0):!1}function a(e){return e?(this.tag=e,this.isRoot=!1):(this.tag=new s("root"),this.isRoot=!0),this.attributes=[],this.children=[],this.hasAttribute=function(e){for(var t=0;t<this.attributes.length;t++)if(this.attributes[t].name==e)return!0;return!1},this.childrenToString=function(){return this.children.join("")},this}function i(e,t){return this.name=e,this.value=t,this}function s(t,n,r,a){return this.name=t.toLowerCase(),this.isSelfClosing=e.inArray(this.name,y)>-1,this.isNonClosing=e.inArray(this.name,v)>-1,this.isClosing=void 0!=n&&n.length>0,this.isInline=e.inArray(this.name,m)>-1,this.disallowNest=e.inArray(this.name,g)>-1,this.requiredParent=f[e.inArray(this.name,f)+1],this.allowEmpty=e.inArray(this.name,p)>-1,this.toProtect=e.inArray(this.name,b)>-1,this.rawAttributes=r,this.allowedAttributes=w[e.inArray(this.name,w)+1],this.requiredAttributes=C[e.inArray(this.name,C)+1],this.render=a&&-1==e.inArray(this.name,a.notRenderedTags),this}function l(t){for(;u(t)&&t.children.length>0;)t=t.children[0];return o(t)&&t.length>0&&e.htmlClean.isWhitespace(t.charAt(0))}function h(t){for(;u(t)&&t.children.length>0;)t=t.children[t.children.length-1];return o(t)&&t.length>0&&e.htmlClean.isWhitespace(t.charAt(t.length-1))}function o(e){return e.constructor==String}function c(e){return o(e)||e.tag.isInline}function u(e){return e.constructor==a}function d(e){return e.replace(/&nbsp;|\n/g," ").replace(/\s\s+/g," ")}e.fn.htmlClean=function(t){return this.each(function(){this.value?this.value=e.htmlClean(this.value,t):this.innerHTML=e.htmlClean(this.innerHTML,t)})},e.htmlClean=function(t,l){l=e.extend({},e.htmlClean.defaults,l);var h,c=/<(\/)?(\w+:)?([\w]+)([^>]*)>/gi,u=/(\w+)=(".*?"|'.*?'|[^\s>]*)/gi,d=new a,m=[d],g=d;l.bodyOnly&&(h=/<body[^>]*>((\n|.)*)<\/body>/i.exec(t))&&(t=h[1]),t=t.concat("<xxx>");for(var p;h=c.exec(t);){var f=new s(h[3],h[1],h[4],l),b=t.substring(p,h.index);if(b.length>0){var y=g.children[g.children.length-1];g.children.length>0&&o(y=g.children[g.children.length-1])?g.children[g.children.length-1]=y.concat(b):g.children.push(b)}if(p=c.lastIndex,f.isClosing)r(m,[f.name])&&(m.pop(),g=m[m.length-1]);else{for(var v,w=new a(f);v=u.exec(f.rawAttributes);){if("style"==v[1].toLowerCase()&&l.replaceStyles)for(var C=!f.isInline,A=0;A<l.replaceStyles.length;A++)l.replaceStyles[A][0].test(v[2])&&(C||(f.render=!1,C=!0),g.children.push(w),m.push(w),g=w,f=new s(l.replaceStyles[A][1],"","",l),w=new a(f));null!=f.allowedAttributes&&(0==f.allowedAttributes.length||e.inArray(v[1],f.allowedAttributes)>-1)&&w.attributes.push(new i(v[1],v[2]))}e.each(f.requiredAttributes,function(){var e=this.toString();w.hasAttribute(e)||w.attributes.push(new i(e,""))});for(var x=0;x<l.replace.length;x++)for(var I=0;I<l.replace[x][0].length;I++){var S="string"==typeof l.replace[x][0][I];if(S&&l.replace[x][0][I]==f.name||!S&&l.replace[x][0][I].test(h)){f.render=!1,g.children.push(w),m.push(w),g=w,f=new s(l.replace[x][1],h[1],h[4],l),w=new a(f),w.attributes=g.attributes,x=l.replace.length;break}}var k=!0;if(g.isRoot||(g.tag.isInline&&!f.isInline?k=!1:g.tag.disallowNest&&f.disallowNest&&!f.requiredParent?k=!1:f.requiredParent&&(k=r(m,f.requiredParent))&&(g=m[m.length-1])),k)if(g.children.push(w),f.toProtect)for(var T=null;T=c.exec(t);){var q=new s(T[3],T[1],T[4],l);if(q.isClosing&&q.name==f.name){w.children.push(RegExp.leftContext.substring(p)),p=c.lastIndex;break}}else f.isSelfClosing||f.isNonClosing||(m.push(w),g=w)}}return n(d,l).join("")},e.htmlClean.defaults={bodyOnly:!0,allowedTags:[],removeTags:["basefont","center","dir","font","frame","frameset","iframe","isindex","menu","noframes","s","strike","u"],removeAttrs:[],allowedClasses:[],notRenderedTags:[],format:!1,formatIndent:0,replace:[[["b","big"],"strong"],[["i"],"em"]],replaceStyles:[[/font-weight:\s*bold/i,"strong"],[/font-style:\s*italic/i,"em"],[/vertical-align:\s*super/i,"sup"],[/vertical-align:\s*sub/i,"sub"]]},e.htmlClean.trim=function(t){return e.htmlClean.trimStart(e.htmlClean.trimEnd(t))},e.htmlClean.trimStart=function(t){return t.substring(e.htmlClean.trimStartIndex(t))},e.htmlClean.trimStartIndex=function(t){for(var n=0;n<t.length-1&&e.htmlClean.isWhitespace(t.charAt(n));n++);return n},e.htmlClean.trimEnd=function(t){return t.substring(0,e.htmlClean.trimEndIndex(t))},e.htmlClean.trimEndIndex=function(t){for(var n=t.length-1;n>=0&&e.htmlClean.isWhitespace(t.charAt(n));n--);return n+1},e.htmlClean.isWhitespace=function(t){return-1!=e.inArray(t,A)};var m=["a","abbr","acronym","address","b","big","br","button","caption","cite","code","del","em","font","hr","i","input","img","ins","label","legend","map","q","samp","select","small","span","strong","sub","sup","tt","var"],g=["h1","h2","h3","h4","h5","h6","p","th","td"],p=["th","td"],f=[null,"li",["ul","ol"],"dt",["dl"],"dd",["dl"],"td",["tr"],"th",["tr"],"tr",["table","thead","tbody","tfoot"],"thead",["table"],"tbody",["table"],"tfoot",["table"]],b=["script","style","pre","code"],y=["br","hr","img","link","meta"],v=["!doctype","?xml"],w=[["class"],"?xml",[],"!doctype",[],"a",["accesskey","class","href","name","title","rel","rev","type","tabindex"],"abbr",["class","title"],"acronym",["class","title"],"blockquote",["cite","class"],"button",["class","disabled","name","type","value"],"del",["cite","class","datetime"],"form",["accept","action","class","enctype","method","name"],"input",["accept","accesskey","alt","checked","class","disabled","ismap","maxlength","name","size","readonly","src","tabindex","type","usemap","value"],"img",["alt","class","height","src","width"],"ins",["cite","class","datetime"],"label",["accesskey","class","for"],"legend",["accesskey","class"],"link",["href","rel","type"],"meta",["content","http-equiv","name","scheme"],"map",["name"],"optgroup",["class","disabled","label"],"option",["class","disabled","label","selected","value"],"q",["class","cite"],"td",["colspan","rowspan"],"th",["colspan","rowspan"],"script",["src","type"],"select",["class","disabled","multiple","name","size","tabindex"],"style",["type"],"table",["class","summary"],"textarea",["accesskey","class","cols","disabled","name","readonly","rows","tabindex"]],C=[[],"img",["alt"]],A=["Â "," ","	","\n","\r","\f"]}(jQuery);